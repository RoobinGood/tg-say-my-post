# Contract: Bot integration with Silero TTS

## Trigger
- Текстовое сообщение от whitelisted пользователя.

## Flow
1. Бот формирует TextInput (текст, язык/голос по умолчанию из конфига).  
2. Через интерфейс synthesis вызывает Silero реализацию.  
3. Получает SynthesisResult и отправляет голосовое сообщение пользователю.  
4. Логирует MetricsRecord (synth_ms, duration) и ошибки, если есть.

## Inputs
- TextInput: text (≤ лимит), lang, voice, format (из конфига, может быть переопределён в будущем).
- Context: chat_id/user_id (для whitelist), trace_id (опционально для логов).

## Outputs
- Успех: Voice message (audio file from SynthesisResult).  
- Ошибка синтеза: текстовое сообщение об ошибке пользователю, лог записи ошибки.

## Failure Modes
- Модуль недоступен/модель не загружена: бот отправляет текстовую ошибку; запрос не повторяется автоматически.
- Валидация текста не пройдена: бот отвечает текстовой подсказкой (лимит/символы).
- Путь вывода недоступен: бот сообщает об ошибке сохранения.

## Metrics
- synth_ms per запрос, duration_s аудио, количество успешных/ошибочных запросов.

