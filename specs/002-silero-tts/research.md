# Research for Silero TTS module

## Decisions

- Decision: Использовать Silero TTS через torch hub (локально кешируемые веса) с поддержкой выбора голоса/языка из конфига.  
  Rationale: Соответствует требованию и простому подключению; веса можно кешировать или положить рядом с образом.  
  Alternatives considered: Внешние облачные TTS (не офлайн), собственная модель (дорого и не требуется).

- Decision: Метрики брать из wall-clock (время загрузки модели один раз, время синтеза per запрос) и длительности аудио; логировать в stdout и позволять простой экспорт в файл.  
  Rationale: Достаточно для отслеживания производительности; не требует дополнительной системы метрик.  
  Alternatives considered: Prometheus/OpenTelemetry сразу (избыточно для первой итерации), отсутствие метрик (не соответствует задаче).

- Decision: Конфиг по умолчанию в файле + переопределение env (голос, язык, формат, путь вывода, устройство CPU/GPU).  
  Rationale: Прозрачное управление в Docker/CI и локально; соответствует конституции про env.  
  Alternatives considered: Только файл (хуже для Docker), только env (менее удобно для локальных экспериментов).

- Decision: Интеграция в бота через существующий интерфейс synthesis; при недоступности Silero возвращать понятное текстовое сообщение, не падать.  
  Rationale: Сохраняет целостность бота и whitelisting, минимальные изменения в обработчиках.  
  Alternatives considered: Жёсткая зависимость на успешный синтез (ухудшает UX), отдельный сервис (усложняет схему).

