# Contract: Telegram Bot Handlers

## /start
- Input: командный апдейт.
- Behavior: ответ текстовой инструкцией (принимаем текст/пересылки, лимит 2000, аудио в ответ).
- Errors: при не-whitelist — отказ без побочных эффектов.

## Text message (direct)
- Input: текст ≤2000 символов, не переслан.
- Behavior: поставить в очередь, синтез без префикса, отправить mp3 реплаем.
- Errors: пустой текст → ответ «озвучивать нечего»; >2000 → ответ о лимите.

## Forwarded user message
- Input: пересланное сообщение пользователя с текстом ≤2000.
- Behavior: добавить префикс «сообщение от пользователя <имя>», синтез, mp3 реплаем.
- Errors: нет текста → «озвучивать нечего»; >2000 → сообщение о лимите.

## Forwarded channel post
- Input: пересланный пост канала с текстом ≤2000.
- Behavior: префикс «пост из канала <название>», синтез, mp3 реплаем.
- Errors: нет текста → «озвучивать нечего»; >2000 → сообщение о лимите.

## Common error path
- Если синтез/отправка фейл: ответить текстом об ошибке (при DEBUG — с трассой), логировать событие.


